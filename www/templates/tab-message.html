<ion-view title="">

  <ion-nav-buttons side="left">
    <button menu-toggle="left" class="button button-icon icon ion-navicon"></button>
  </ion-nav-buttons>

  <ion-nav-buttons side="right">
    <button class="button button-icon icon ion-ios-compose-outline" ng-click="compose()"></button>
  </ion-nav-buttons>


  <ion-content class="has-header">
    <ion-refresher on-refresh="doRefresh()" pulling-text="Pull to refresh..." refreshing-text="Refreshing!" refreshing-icon="ion-loading-c">
    </ion-refresher>
    <ion-list>
      <ion-item ng-repeat="msg in messages" type="details item item-text-wrap" ng-click="openMessageDetail(msg.receiver_id)" ng-if="messages.length > 0">
        <div class="details item-icon-right">
          <img class="rounded" ng-src="data:image/png;base64,{{msg.pic_blob}}" width="50" height="50" ng-if="msg.pic_blob.length > 0" />
          <img class="rounded" ng-src="img/photo.png" width="50" height="50" ng-if="msg.pic_blob.length < 1 || msg.pic_blob == null" />
          <h3>{{msg.name}}</h3>
          <p>{{msg.message}}</p>
          <p>
            <small class="subdued">{{msg.datecreated}}</small>
          </p>
        </div>
      </ion-item>
    </ion-list>
  </ion-content>

</ion-view>
